# SPDX-License-Identifier: MIT
# This file was generated by scripts/oqsbuilder.py:SigFamily.generate_cmake

set(_ML_DSA_OBJS "")

if(OQS_ENABLE_SIG_ml_dsa_44)
    add_library(ml_dsa_44 OBJECT sig_ml_dsa_44.c)
    set(_ML_DSA_OBJS ${_ML_DSA_OBJS} $<TARGET_OBJECTS:ml_dsa_44>)
endif()

if(OQS_ENABLE_SIG_ml_dsa_65)
    add_library(ml_dsa_65 OBJECT sig_ml_dsa_65.c)
    set(_ML_DSA_OBJS ${_ML_DSA_OBJS} $<TARGET_OBJECTS:ml_dsa_65>)
endif()

if(OQS_ENABLE_SIG_ml_dsa_87)
    add_library(ml_dsa_87 OBJECT sig_ml_dsa_87.c)
    set(_ML_DSA_OBJS ${_ML_DSA_OBJS} $<TARGET_OBJECTS:ml_dsa_87>)
endif()

if(OQS_ENABLE_SIG_ml_dsa_44_aarch64)
    set(IMPL_KEY mldsa-native_ml-dsa-44_aarch64)
    add_library(
        mldsa-native_ml-dsa-44_aarch64
        OBJECT
        ${IMPL_KEY}/mldsa/src/ct.c
        ${IMPL_KEY}/mldsa/src/poly.c
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/rej_uniform_eta4_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/poly_caddq_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/polyz_unpack_table.c
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/rej_uniform_eta2_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/poly_chknorm_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/poly_decompose_88_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/polyz_unpack_17_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/poly_decompose_32_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/mld_polyvecl_pointwise_acc_montgomery_l5.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/pointwise_montgomery.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/ntt.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/aarch64_zetas.c
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/rej_uniform_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/polyz_unpack_19_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/rej_uniform_table.c
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/poly_use_hint_32_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/poly_use_hint_88_asm.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/mld_polyvecl_pointwise_acc_montgomery_l4.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/mld_polyvecl_pointwise_acc_montgomery_l7.S
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/rej_uniform_eta_table.c
        ${IMPL_KEY}/mldsa/src/native/aarch64/src/intt.S
        ${IMPL_KEY}/mldsa/src/sign.c
        ${IMPL_KEY}/mldsa/src/debug.c
        ${IMPL_KEY}/mldsa/src/poly_kl.c
        ${IMPL_KEY}/mldsa/src/polyvec.c
        ${IMPL_KEY}/mldsa/src/packing.c
    )

    target_include_directories(
        mldsa-native_ml-dsa-44_aarch64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mldsa-native_ml-dsa-44_aarch64
        PUBLIC
            -DMLD_CONFIG_PARAMETER_SET=44
            -DMLD_CONFIG_FILE="../../integration/liboqs/config_aarch64.h"
    )

    set(_ML_DSA_OBJS
        ${_ML_DSA_OBJS}
        $<TARGET_OBJECTS:mldsa-native_ml-dsa-44_aarch64>
    )
endif()

if(OQS_ENABLE_SIG_ml_dsa_44)
    set(IMPL_KEY mldsa-native_ml-dsa-44_ref)
    add_library(
        mldsa-native_ml-dsa-44_ref
        OBJECT
        ${IMPL_KEY}/mldsa/src/ct.c
        ${IMPL_KEY}/mldsa/src/poly.c
        ${IMPL_KEY}/mldsa/src/sign.c
        ${IMPL_KEY}/mldsa/src/debug.c
        ${IMPL_KEY}/mldsa/src/poly_kl.c
        ${IMPL_KEY}/mldsa/src/polyvec.c
        ${IMPL_KEY}/mldsa/src/packing.c
    )

    target_include_directories(
        mldsa-native_ml-dsa-44_ref
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mldsa-native_ml-dsa-44_ref
        PUBLIC
            -DMLD_CONFIG_PARAMETER_SET=44
            -DMLD_CONFIG_FILE="../../integration/liboqs/config_c.h"
    )

    set(_ML_DSA_OBJS
        ${_ML_DSA_OBJS}
        $<TARGET_OBJECTS:mldsa-native_ml-dsa-44_ref>
    )
endif()

if(OQS_ENABLE_SIG_ml_dsa_65)
    set(IMPL_KEY mldsa-native_ml-dsa-65_ref)
    add_library(
        mldsa-native_ml-dsa-65_ref
        OBJECT
        ${IMPL_KEY}/mldsa/src/ct.c
        ${IMPL_KEY}/mldsa/src/poly.c
        ${IMPL_KEY}/mldsa/src/sign.c
        ${IMPL_KEY}/mldsa/src/debug.c
        ${IMPL_KEY}/mldsa/src/poly_kl.c
        ${IMPL_KEY}/mldsa/src/polyvec.c
        ${IMPL_KEY}/mldsa/src/packing.c
    )

    target_include_directories(
        mldsa-native_ml-dsa-65_ref
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mldsa-native_ml-dsa-65_ref
        PUBLIC
            -DMLD_CONFIG_PARAMETER_SET=65
            -DMLD_CONFIG_FILE="../../integration/liboqs/config_c.h"
    )

    set(_ML_DSA_OBJS
        ${_ML_DSA_OBJS}
        $<TARGET_OBJECTS:mldsa-native_ml-dsa-65_ref>
    )
endif()

if(OQS_ENABLE_SIG_ml_dsa_87)
    set(IMPL_KEY mldsa-native_ml-dsa-87_ref)
    add_library(
        mldsa-native_ml-dsa-87_ref
        OBJECT
        ${IMPL_KEY}/mldsa/src/ct.c
        ${IMPL_KEY}/mldsa/src/poly.c
        ${IMPL_KEY}/mldsa/src/sign.c
        ${IMPL_KEY}/mldsa/src/debug.c
        ${IMPL_KEY}/mldsa/src/poly_kl.c
        ${IMPL_KEY}/mldsa/src/polyvec.c
        ${IMPL_KEY}/mldsa/src/packing.c
    )

    target_include_directories(
        mldsa-native_ml-dsa-87_ref
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mldsa-native_ml-dsa-87_ref
        PUBLIC
            -DMLD_CONFIG_PARAMETER_SET=87
            -DMLD_CONFIG_FILE="../../integration/liboqs/config_c.h"
    )

    set(_ML_DSA_OBJS
        ${_ML_DSA_OBJS}
        $<TARGET_OBJECTS:mldsa-native_ml-dsa-87_ref>
    )
endif()

set(ML_DSA_OBJS ${_ML_DSA_OBJS} PARENT_SCOPE)
