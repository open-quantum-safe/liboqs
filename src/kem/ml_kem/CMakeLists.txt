# SPDX-License-Identifier: MIT
# This file was generated by scripts/oqsbuilder.py:KemFamily.generate_cmake

set(_ML_KEM_OBJS "")

if(OQS_ENABLE_KEM_ml_kem_512)
    add_library(ml_kem_512 OBJECT kem_ml_kem_512.c)
    set(_ML_KEM_OBJS ${_ML_KEM_OBJS} $<TARGET_OBJECTS:ml_kem_512>)
endif()

if(OQS_ENABLE_KEM_ml_kem_768)
    add_library(ml_kem_768 OBJECT kem_ml_kem_768.c)
    set(_ML_KEM_OBJS ${_ML_KEM_OBJS} $<TARGET_OBJECTS:ml_kem_768>)
endif()

if(OQS_ENABLE_KEM_ml_kem_1024)
    add_library(ml_kem_1024 OBJECT kem_ml_kem_1024.c)
    set(_ML_KEM_OBJS ${_ML_KEM_OBJS} $<TARGET_OBJECTS:ml_kem_1024>)
endif()

if(OQS_ENABLE_KEM_ml_kem_1024_x86_64)
    set(IMPL_KEY mlkem-native_ml-kem-1024_x86_64)
    add_library(
        mlkem-native_ml-kem-1024_x86_64
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/rej_uniform_avx2.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/consts.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/basemul.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/ntt.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/compress_avx2.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/rej_uniform_table.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/reduce.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/tomont.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/basemul.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/nttfrombytes.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/ntttobytes.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/intt.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/mulcache_compute.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/nttunpack.S
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-1024_x86_64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-1024_x86_64
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=1024
            -DMLK_CONFIG_FILE="${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}/integration/liboqs/config_x86_64.h"
    )
    target_compile_options(
        mlkem-native_ml-kem-1024_x86_64
        PRIVATE -mavx2 -mbmi2 -mpopcnt
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-1024_x86_64>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_1024_aarch64)
    set(IMPL_KEY mlkem-native_ml-kem-1024_aarch64)
    add_library(
        mlkem-native_ml-kem-1024_aarch64
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k4.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k3.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_tomont_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/ntt.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_mulcache_compute_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/aarch64_zetas.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_reduce_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/rej_uniform_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k2.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/rej_uniform_table.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_tobytes_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/intt.S
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-1024_aarch64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-1024_aarch64
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=1024
            -DMLK_CONFIG_FILE="${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}/integration/liboqs/config_aarch64.h"
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-1024_aarch64>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_1024)
    set(IMPL_KEY mlkem-native_ml-kem-1024_ref)
    add_library(
        mlkem-native_ml-kem-1024_ref
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-1024_ref
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-1024_ref
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=1024
            -DMLK_CONFIG_FILE="../../integration/liboqs/config_c.h"
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-1024_ref>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_512_x86_64)
    set(IMPL_KEY mlkem-native_ml-kem-512_x86_64)
    add_library(
        mlkem-native_ml-kem-512_x86_64
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/rej_uniform_avx2.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/consts.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/basemul.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/ntt.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/compress_avx2.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/rej_uniform_table.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/reduce.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/tomont.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/basemul.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/nttfrombytes.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/ntttobytes.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/intt.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/mulcache_compute.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/nttunpack.S
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-512_x86_64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-512_x86_64
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=512
            -DMLK_CONFIG_FILE="${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}/integration/liboqs/config_x86_64.h"
    )
    target_compile_options(
        mlkem-native_ml-kem-512_x86_64
        PRIVATE -mavx2 -mbmi2 -mpopcnt
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-512_x86_64>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_512_aarch64)
    set(IMPL_KEY mlkem-native_ml-kem-512_aarch64)
    add_library(
        mlkem-native_ml-kem-512_aarch64
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k4.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k3.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_tomont_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/ntt.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_mulcache_compute_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/aarch64_zetas.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_reduce_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/rej_uniform_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k2.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/rej_uniform_table.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_tobytes_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/intt.S
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-512_aarch64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-512_aarch64
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=512
            -DMLK_CONFIG_FILE="${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}/integration/liboqs/config_aarch64.h"
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-512_aarch64>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_512)
    set(IMPL_KEY mlkem-native_ml-kem-512_ref)
    add_library(
        mlkem-native_ml-kem-512_ref
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-512_ref
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-512_ref
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=512
            -DMLK_CONFIG_FILE="../../integration/liboqs/config_c.h"
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-512_ref>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_768_x86_64)
    set(IMPL_KEY mlkem-native_ml-kem-768_x86_64)
    add_library(
        mlkem-native_ml-kem-768_x86_64
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/rej_uniform_avx2.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/consts.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/basemul.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/ntt.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/compress_avx2.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/rej_uniform_table.c
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/reduce.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/tomont.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/basemul.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/nttfrombytes.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/ntttobytes.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/intt.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/mulcache_compute.S
        ${IMPL_KEY}/mlkem/src/native/x86_64/src/nttunpack.S
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-768_x86_64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-768_x86_64
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=768
            -DMLK_CONFIG_FILE="${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}/integration/liboqs/config_x86_64.h"
    )
    target_compile_options(
        mlkem-native_ml-kem-768_x86_64
        PRIVATE -mavx2 -mbmi2 -mpopcnt
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-768_x86_64>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_768_aarch64)
    set(IMPL_KEY mlkem-native_ml-kem-768_aarch64)
    add_library(
        mlkem-native_ml-kem-768_aarch64
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k4.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k3.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_tomont_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/ntt.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_mulcache_compute_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/aarch64_zetas.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_reduce_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/rej_uniform_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/polyvec_basemul_acc_montgomery_cached_asm_k2.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/rej_uniform_table.c
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/poly_tobytes_asm.S
        ${IMPL_KEY}/mlkem/src/native/aarch64/src/intt.S
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-768_aarch64
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-768_aarch64
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=768
            -DMLK_CONFIG_FILE="${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}/integration/liboqs/config_aarch64.h"
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-768_aarch64>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_768)
    set(IMPL_KEY mlkem-native_ml-kem-768_ref)
    add_library(
        mlkem-native_ml-kem-768_ref
        OBJECT
        ${IMPL_KEY}/mlkem/src/poly.c
        ${IMPL_KEY}/mlkem/src/compress.c
        ${IMPL_KEY}/mlkem/src/sampling.c
        ${IMPL_KEY}/mlkem/src/verify.c
        ${IMPL_KEY}/mlkem/src/kem.c
        ${IMPL_KEY}/mlkem/src/indcpa.c
        ${IMPL_KEY}/mlkem/src/debug.c
        ${IMPL_KEY}/mlkem/src/poly_k.c
    )

    target_include_directories(
        mlkem-native_ml-kem-768_ref
        PRIVATE
            ${CMAKE_CURRENT_LIST_DIR}/${IMPL_KEY}
            ${PROJECT_SOURCE_DIR}/src/common/pqclean_shims
    )

    target_compile_options(
        mlkem-native_ml-kem-768_ref
        PUBLIC
            -DMLK_CONFIG_PARAMETER_SET=768
            -DMLK_CONFIG_FILE="../../integration/liboqs/config_c.h"
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:mlkem-native_ml-kem-768_ref>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_1024_cuda)
    set(IMPL_KEY cupqc_ml-kem-1024_cuda)
    add_library(cupqc_ml-kem-1024_cuda OBJECT ${IMPL_KEY}/cupqc_ml-kem.cu)

    target_compile_options(
        cupqc_ml-kem-1024_cuda
        PRIVATE $<$<COMPILE_LANGUAGE:CUDA>:-rdc=true -dlto -arch=compute_70>
    )

    target_link_libraries(cupqc_ml-kem-1024_cuda PRIVATE cupqc-pk_static)

    set(_ML_KEM_OBJS ${_ML_KEM_OBJS} $<TARGET_OBJECTS:cupqc_ml-kem-1024_cuda>)
endif()

if(OQS_ENABLE_KEM_ml_kem_512_cuda)
    set(IMPL_KEY cupqc_ml-kem-512_cuda)
    add_library(cupqc_ml-kem-512_cuda OBJECT ${IMPL_KEY}/cupqc_ml-kem.cu)

    target_compile_options(
        cupqc_ml-kem-512_cuda
        PRIVATE $<$<COMPILE_LANGUAGE:CUDA>:-rdc=true -dlto -arch=compute_70>
    )

    target_link_libraries(cupqc_ml-kem-512_cuda PRIVATE cupqc-pk_static)

    set(_ML_KEM_OBJS ${_ML_KEM_OBJS} $<TARGET_OBJECTS:cupqc_ml-kem-512_cuda>)
endif()

if(OQS_ENABLE_KEM_ml_kem_768_cuda)
    set(IMPL_KEY cupqc_ml-kem-768_cuda)
    add_library(cupqc_ml-kem-768_cuda OBJECT ${IMPL_KEY}/cupqc_ml-kem.cu)

    target_compile_options(
        cupqc_ml-kem-768_cuda
        PRIVATE $<$<COMPILE_LANGUAGE:CUDA>:-rdc=true -dlto -arch=compute_70>
    )

    target_link_libraries(cupqc_ml-kem-768_cuda PRIVATE cupqc-pk_static)

    set(_ML_KEM_OBJS ${_ML_KEM_OBJS} $<TARGET_OBJECTS:cupqc_ml-kem-768_cuda>)
endif()

if(OQS_ENABLE_KEM_ml_kem_1024_icicle_cuda)
    set(IMPL_KEY icicle_ml-kem-1024_icicle_cuda)
    add_library(
        icicle_ml-kem-1024_icicle_cuda
        OBJECT
        ${IMPL_KEY}/icicle_ml-kem.cpp
    )

    target_link_libraries(
        icicle_ml-kem-1024_icicle_cuda
        PRIVATE icicle::icicle_pqc_package
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:icicle_ml-kem-1024_icicle_cuda>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_512_icicle_cuda)
    set(IMPL_KEY icicle_ml-kem-512_icicle_cuda)
    add_library(
        icicle_ml-kem-512_icicle_cuda
        OBJECT
        ${IMPL_KEY}/icicle_ml-kem.cpp
    )

    target_link_libraries(
        icicle_ml-kem-512_icicle_cuda
        PRIVATE icicle::icicle_pqc_package
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:icicle_ml-kem-512_icicle_cuda>
    )
endif()

if(OQS_ENABLE_KEM_ml_kem_768_icicle_cuda)
    set(IMPL_KEY icicle_ml-kem-768_icicle_cuda)
    add_library(
        icicle_ml-kem-768_icicle_cuda
        OBJECT
        ${IMPL_KEY}/icicle_ml-kem.cpp
    )

    target_link_libraries(
        icicle_ml-kem-768_icicle_cuda
        PRIVATE icicle::icicle_pqc_package
    )

    set(_ML_KEM_OBJS
        ${_ML_KEM_OBJS}
        $<TARGET_OBJECTS:icicle_ml-kem-768_icicle_cuda>
    )
endif()

set(ML_KEM_OBJS ${_ML_KEM_OBJS} PARENT_SCOPE)
