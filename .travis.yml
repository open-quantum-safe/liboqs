language: c
sudo: false

matrix:
  include:
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-4.8
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-4.8
        - astyle
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-4.9
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-4.9
        - astyle
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-5
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-5
        - astyle
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-6 USE_OPENSSL=1
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-6
        - astyle
        - libssl-dev
  - os: osx
    compiler: clang
    env: CC_OQS=clang AES_NI=0 USE_OPENSSL=1
    before_install:
      - brew install astyle openssl

script:
  - make
  - make check
  - bash .travis-style-check.sh
  - bash .travis-global-namespace-check.sh
  - bash .travis-banned-functions-check.sh
